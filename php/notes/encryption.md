# π” PHP ν•΄μ‹±κ³Ό μ•”νΈν™” μ •λ¦¬

μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ **λΉ„λ°€λ²νΈ λ³΄νΈ, λ―Όκ° λ°μ΄ν„° μ €μ¥, μΈμ¦ ν† ν° μƒμ„±** λ“±μ„ μ„ν•΄ PHPλ” **ν•΄μ‹±(Hashing)** κ³Ό **μ•”νΈν™”(Encryption)** κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

---

## 1οΈβƒ£ ν•΄μ‹±(Hashing)μ΄λ€?

- **μΌλ°©ν–¥ λ³€ν™**: μ…λ ¥κ°’ β†’ κ³ μ •λ κΈΈμ΄μ μ•”νΈν™”λ λ¬Έμμ—΄  
- μ›λ κ°’μΌλ΅ **λ³µνΈν™”κ°€ λ¶κ°€λ¥**  
- μ£Όλ΅ **λΉ„λ°€λ²νΈ μ €μ¥** λ“±μ— μ‚¬μ©

---

### 1) β… ν•΄μ‹± ν•¨μ: `password_hash()` / `password_verify()`

```php
<?php
$pw = "mypassword";

// λΉ„λ°€λ²νΈ ν•΄μ‹ μƒμ„±
$hash = password_hash($pw, PASSWORD_DEFAULT);

// λΉ„λ°€λ²νΈ κ²€μ¦
if (password_verify("mypassword", $hash)) {
    echo "μΌμΉν•©λ‹λ‹¤!";
}
?>
```

| ν•¨μ               | μ„¤λ…                             |
|--------------------|----------------------------------|
| `password_hash()`   | λΉ„λ°€λ²νΈλ¥Ό μ•μ „ν• λ°©μ‹μΌλ΅ ν•΄μ‹ν™” |
| `password_verify()` | μ…λ ¥κ°’κ³Ό ν•΄μ‹κ°’μ„ λΉ„κµ            |
| `PASSWORD_DEFAULT` | ν„μ¬ PHPκ°€ κ¶μ¥ν•λ” μ•κ³ λ¦¬μ¦ μ‚¬μ© (`bcrypt`, ν–¥ν›„ `argon2` λ“±) |

β” ν•΄μ‹λ” **κ°™μ€ λΉ„λ°€λ²νΈλΌλ„ λ§¤λ² λ‹¤λ¥Έ κ²°κ³Όκ°€ μƒμ„±**λ©λ‹λ‹¤ (μ†”νΈ μλ™ ν¬ν•¨)  
β” μ†”νΈλ€, λΉ„λ°€λ²νΈμ— μ¶”κ°€ν•λ” λλ¤ λ¬Έμμ—΄λ΅ ν•΄μ‹κ°’μ„ κ³ μμ μΌλ΅ λ§¤λ² λ‹¤λ¥΄κ² λ§λ“¤μ–΄μ£Όλ” λ³΄μ• κΈ°μ   

---

### 2) β μ‚¬μ©ν•μ§€ λ§μ•„μ•Ό ν•  ν•΄μ‹ ν•¨μ

`md5()`, `sha1()` μ€ λΉ λ¥΄κ³  μ¶©λμ— μ·¨μ•½ν•μ—¬ **λΉ„λ°€λ²νΈ μ €μ¥μ— μ λ€ μ‚¬μ© κΈμ§€**

---

## 2οΈβƒ£ μ•”νΈν™”(Encryption)μ΄λ€?

- **μ–‘λ°©ν–¥ λ³€ν™**: λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ—¬ μ €μ¥ν•κ³ , **λ³µνΈν™”λ΅ μ›λ κ°’ λ³µμ› κ°€λ¥**  
- λ―Όκ°ν• μ‚¬μ©μ μ •λ³΄(μ£Όλ―Όλ²νΈ, μΉ΄λ“λ²νΈ λ“±) μ €μ¥ μ‹ μ‚¬μ©

### `openssl_encrypt()` / `openssl_decrypt()`

```php
<?php
$data = "Secret Data";
$key = "mySecretKey123"; // ν‚¤λ” κΈΈμ΄μ™€ λ³΄μ•μ— λ”°λΌ μ„¤μ •
$method = "AES-256-CBC";
$iv = openssl_random_pseudo_bytes(16);

// μ•”νΈν™”
$encrypted = openssl_encrypt($data, $method, $key, 0, $iv);

// λ³µνΈν™”
$decrypted = openssl_decrypt($encrypted, $method, $key, 0, $iv);
?>
```

| μ”μ†         | μ„¤λ…                                           |
|--------------|------------------------------------------------|
| `$method`    | μ•”νΈν™” λ°©μ‹ (`AES-256-CBC` λ“± OpenSSL μ•κ³ λ¦¬μ¦) |
| `$key`       | μ•”νΈν™”/λ³µνΈν™”μ— μ‚¬μ©ν•λ” λΉ„λ°€ν‚¤                 |
| `$iv`        | μ΄κΈ°ν™” λ²΅ν„° (CBC λ¨λ“μ—μ„λ” ν•„μ)               |

β” `AES-256-CBC`λ” λ„λ¦¬ μ“°μ΄λ” λ€μΉ­ ν‚¤ μ•”νΈν™” λ°©μ‹μ…λ‹λ‹¤.  
β” `$iv`μ™€ `$key`λ” μ•μ „ν•κ² μ €μ¥ λλ” ν•¨κ» μ•”νΈλ¬Έμ— ν¬ν•¨ν•΄μ•Ό ν•©λ‹λ‹¤.  

---

## 3οΈβƒ£ ν•΄μ‹± vs μ•”νΈν™” μ°¨μ΄

| ν•­λ©       | ν•΄μ‹±(Hashing)                        | μ•”νΈν™”(Encryption)                       |
|------------|---------------------------------------|------------------------------------------|
| λ°©ν–¥μ„±     | μΌλ°©ν–¥ (λ³µνΈν™” λ¶κ°€λ¥)                | μ–‘λ°©ν–¥ (λ³µνΈν™” κ°€λ¥)                     |
| λ©μ        | λΉ„λ°€λ²νΈ κ²€μ¦                         | λ―Όκ° μ •λ³΄ μ €μ¥                           |
| μμ‹ ν•¨μ | `password_hash()`, `md5()`, `sha1()` | `openssl_encrypt()`, `mcrypt` (deprecated) |
| μ•μ „μ„±     | λ§¤μ° κ°•ν•¨ (μ†”νΈ ν¬ν•¨ μ‹)               | ν‚¤ κ΄€λ¦¬μ— λ”°λΌ λ‹¤λ¦„                      |

---

## 4οΈβƒ£ μ‹¤λ¬΄ μ μ© μμ‹

#### 1. λΉ„λ°€λ²νΈ μ €μ¥

```php
$password = $_POST["password"];
$hash = password_hash($password, PASSWORD_DEFAULT);
// DBμ— $hash μ €μ¥
```

#### 2. λΉ„λ°€λ²νΈ λ΅κ·ΈμΈ κ²€μ¦

```php
if (password_verify($_POST["password"], $user["hashed_password"])) {
    echo "λ΅κ·ΈμΈ μ„±κ³µ!";
}
```

#### 3. μ£Όλ―Όλ“±λ΅λ²νΈ μ•”νΈν™” μ €μ¥

```php
$iv = openssl_random_pseudo_bytes(16);
$encrypted = openssl_encrypt($ssn, "AES-256-CBC", $key, 0, $iv);
// $encrypted μ™€ $iv λ¥Ό ν•¨κ» DBμ— μ €μ¥
```

---

## 5οΈβƒ£ λ³΄μ• μ£Όμμ‚¬ν•­

| ν•­λ©                 | μ„¤λ…                                                 |
|----------------------|------------------------------------------------------|
| λΉ„λ°€λ²νΈ μ €μ¥ μ‹     | λ°λ“μ‹ `password_hash()` μ‚¬μ© (md5, sha1 κΈμ§€)        |
| μ•”νΈν™” ν‚¤ κ΄€λ¦¬        | `.env` νμΌ λλ” μ•μ „ν• ν™κ²½λ³€μμ— μ €μ¥               |
| IV(μ΄κΈ°ν™” λ²΅ν„°) κ΄€λ¦¬ | μ•”νΈλ¬Έκ³Ό ν•¨κ» μ €μ¥ν•κ±°λ‚ μ•μ „ν•κ² μ „λ‹¬ν•΄μ•Ό ν•¨         |
| TLS/HTTPS μ‚¬μ©       | μ „μ†΅ μ¤‘ λ°μ΄ν„° λ³΄νΈλ¥Ό μ„ν•΄ ν•„μ                       |
| νƒ€μ΄λ° κ³µκ²© λ°©μ§€     | `hash_equals()` ν•¨μ μ‚¬μ© (κ³ μ • μ‹κ°„ λΉ„κµ)            |

---

## π― μ •λ¦¬

β” ν•΄μ‹±μ€ λ³µνΈν™” λ¶κ°€λ¥ν• λ°©μ‹μΌλ΅, **λΉ„λ°€λ²νΈ κ²€μ¦μ—λ§ μ‚¬μ©**λ©λ‹λ‹¤.  
β” μ•”νΈν™”λ” λ³µνΈν™” κ°€λ¥ν• λ°©μ‹μΌλ΅, **λ―Όκ° μ •λ³΄ μ €μ¥ λ° λ³µμ›**μ΄ κ°€λ¥ν•©λ‹λ‹¤.  
β” ν•΄μ‹±μ—λ” `password_hash()`, `password_verify()`λ¥Ό, μ•”νΈν™”μ—λ” `openssl_encrypt()`, `openssl_decrypt()`μ„ μ‚¬μ©ν•©λ‹λ‹¤.  
β” λ³΄μ•μ—μ„ κ°€μ¥ μ¤‘μ”ν• κ²ƒμ€ **μ‚¬μ©μ μ…λ ¥μ€ ν•­μƒ μ•μ „ν•κ² μ²λ¦¬ν•κ³ , ν‚¤μ™€ μ•”νΈλ¬Έμ„ μ•μ „ν•κ² κ΄€λ¦¬**ν•λ” κ²ƒμ…λ‹λ‹¤.

