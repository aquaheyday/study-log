# âœ… Go ì–¸ì–´ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Testing)

GoëŠ” í‘œì¤€ íŒ¨í‚¤ì§€ `testing`ì„ í†µí•´ **ê°„ê²°í•˜ê³  ê°•ë ¥í•œ í…ŒìŠ¤íŠ¸ ê¸°ëŠ¥**ì„ ì œê³µí•©ë‹ˆë‹¤.  
í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ `_test.go` íŒŒì¼ì— ì‘ì„±í•˜ë©°, `go test` ëª…ë ¹ì–´ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

## 1ï¸âƒ£ ê¸°ë³¸ í…ŒìŠ¤íŠ¸ í•¨ìˆ˜

```go
// calc.go
package calc

func Add(a, b int) int {
    return a + b
}
```

```go
// calc_test.go
package calc

import "testing"

func TestAdd(t *testing.T) {
    result := Add(2, 3)
    if result != 5 {
        t.Errorf("Add(2, 3) = %d; want 5", result)
    }
}
```

âœ” í…ŒìŠ¤íŠ¸ í•¨ìˆ˜ëŠ” `Test`ë¡œ ì‹œì‘í•˜ê³  `*testing.T`ë¥¼ ì¸ìë¡œ ë°›ìŒ  
âœ” ì‹¤íŒ¨ ì‹œ `t.Errorf`, `t.Fatal` ì‚¬ìš©  

---

## 2ï¸âƒ£ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
go test
```

#### ì˜µì…˜  
- `-v`: ìƒì„¸ ì¶œë ¥ (`go test -v`)  
- `-run=TestAdd`: íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰  

---

## 3ï¸âƒ£ ì„œë¸Œ í…ŒìŠ¤íŠ¸

```go
func TestMultiply(t *testing.T) {
    tests := []struct {
        name     string
        a, b, want int
    }{
        {"2*3", 2, 3, 6},
        {"0*5", 0, 5, 0},
    }

    for _, tc := range tests {
        t.Run(tc.name, func(t *testing.T) {
            got := tc.a * tc.b
            if got != tc.want {
                t.Errorf("%d*%d = %d; want %d", tc.a, tc.b, got, tc.want)
            }
        })
    }
}
```

âœ” `t.Run()`ìœ¼ë¡œ **í…Œì´ë¸” ê¸°ë°˜ í…ŒìŠ¤íŠ¸** ì‘ì„± ê°€ëŠ¥  
âœ” ë°˜ë³µë˜ëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ê¹”ë”í•˜ê²Œ ì •ë¦¬ ê°€ëŠ¥

---

## 4ï¸âƒ£ ì»¤ë²„ë¦¬ì§€ ì¸¡ì •
**"ë‚´ê°€ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì „ì²´ ì½”ë“œ ì¤‘ ì–¼ë§ˆë‚˜ ì‹¤í–‰ë˜ì—ˆëŠ”ê°€?"**ë¥¼ í¼ì„¼íŠ¸ë¡œ ë³´ì—¬ì£¼ëŠ” ê²ƒ

```bash
go test -cover
```

```bash
go test -coverprofile=cover.out
go tool cover -html=cover.out
```

âœ” í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ % í™•ì¸  
âœ” `-html` ì˜µì…˜ìœ¼ë¡œ ì‹œê°í™” ê°€ëŠ¥  

---

## 5ï¸âƒ£ ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸
íŠ¹ì • í•¨ìˆ˜ê°€ ì–¼ë§ˆë‚˜ ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€(ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ë“±)ë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆìŒ
```go
func BenchmarkAdd(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Add(1, 2)
    }
}
```

```bash
go test -bench=.
```

âœ” `b.N`ì€ ë²¤ì¹˜ë§ˆí¬ë¥¼ ìœ„í•œ ë°˜ë³µ íšŸìˆ˜  
âœ” `-benchmem`ìœ¼ë¡œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì¸¡ì • ê°€ëŠ¥

---

## 6ï¸âƒ£ í…ŒìŠ¤íŠ¸ ì˜ˆì œ

```go
func ExampleAdd() {
    fmt.Println(Add(2, 3))
    // Output: 5
}
```

âœ” `ExampleXxx` í•¨ìˆ˜ëŠ” ë¬¸ì„œí™” + í…ŒìŠ¤íŠ¸ìš©  
âœ” `Output:` ì£¼ì„ì´ ê²°ê³¼ì™€ ì¼ì¹˜í•´ì•¼ í…ŒìŠ¤íŠ¸ í†µê³¼  

---

## 7ï¸âƒ£ í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡° ì˜ˆì‹œ

```
project/
â”œâ”€â”€ main.go
â”œâ”€â”€ math/
â”‚   â”œâ”€â”€ add.go
â”‚   â””â”€â”€ add_test.go
â””â”€â”€ utils/
    â”œâ”€â”€ str.go
    â””â”€â”€ str_test.go
```

âœ” íŒ¨í‚¤ì§€ë³„ë¡œ í…ŒìŠ¤íŠ¸ íŒŒì¼ ë¶„ë¦¬  
âœ” `_test.go`ëŠ” í…ŒìŠ¤íŠ¸ ì „ìš© íŒŒì¼ (ë¹Œë“œ ì‹œ ì œì™¸ë¨)

---

## 8ï¸âƒ£ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ì˜ˆì™¸ ì²˜ë¦¬

```go
if err != nil {
    t.Fatal("unexpected error:", err)
}
```

| í•¨ìˆ˜ | ì„¤ëª… |
|------|------|
| `t.Error(...)` | í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨, ê³„ì† ì§„í–‰ |
| `t.Fatal(...)` | í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨, ì¦‰ì‹œ ì¢…ë£Œ |
| `t.Log(...)`   | ë¡œê·¸ ì¶œë ¥ (ë””ë²„ê¹…ìš©) |

---

## ğŸ¯ ì •ë¦¬

âœ” í…ŒìŠ¤íŠ¸ëŠ” ê°€ëŠ¥í•œ í•œ **ì‘ê³  ë¹ ë¥´ê²Œ**  
âœ” ê³µí†µ ì…‹ì—…ì€ `TestMain(m *testing.M)` í™œìš© ê°€ëŠ¥  
âœ” ì™¸ë¶€ ì˜ì¡´ì„±(Mock ë“±)ì€ **ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬**ë¡œ í•´ê²°  
âœ” GitHub Actions, Drone ë“±ìœ¼ë¡œ CI í…ŒìŠ¤íŠ¸ ìë™í™” ì¶”ì²œ  
âœ” ì‹¤ì „ì—ì„œëŠ” `stretchr/testify` ê°™ì€ ì„œë“œíŒŒí‹° assertion íŒ¨í‚¤ì§€ë„ ë§ì´ ì‚¬ìš©  
