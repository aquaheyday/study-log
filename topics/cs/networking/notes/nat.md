# π NAT & ν¬νΈν¬μ›λ”©

**NAT(Network Address Translation)μ€ μ‚¬μ„¤ IPμ™€ κ³µμΈ IP κ°„μ μ£Όμ† λ³€ν™ κΈ°μ μ…λ‹λ‹¤.**  
**ν¬νΈν¬μ›λ”©μ€ NATμ μΌμΆ…μΌλ΅, μ™Έλ¶€μ—μ„ λ‚΄λ¶€ λ„¤νΈμ›ν¬λ΅μ μ ‘κ·Όμ„ κ°€λ¥ν•κ² ν•©λ‹λ‹¤.**

---

## 1οΈβƒ£ NATλ€?

| ν•­λ©   | μ„¤λ… |
|--------|------|
| λ©μ    | **μ‚¬μ„¤ IP β†” κ³µμΈ IP λ³€ν™**μ„ ν†µν•΄ μΈν„°λ„· ν†µμ‹  κ°€λ¥ |
| μ‚¬μ© μ΄μ  | IPv4 μ£Όμ† λ¶€μ΅± λ¬Έμ  ν•΄κ²°, λ‚΄λ¶€λ§ λ³΄νΈ |
| μ„μΉ   | λ³΄ν†µ **λΌμ°ν„° λλ” λ°©ν™”λ²½**μ— μ„¤μ • |
| λ€μƒ κ³„μΈµ | OSI 3κ³„μΈµ (λ„¤νΈμ›ν¬ κ³„μΈµ) |
| μ£Όμ” κΈ°λ¥ | μ£Όμ† λ³€ν™, νΈλν”½ μ μ–΄, λ³΄μ• κ°•ν™” |

---

## 2οΈβƒ£ NATμ λ™μ‘ λ°©μ‹

1. λ‚΄λ¶€ νΈμ¤νΈκ°€ μ™Έλ¶€λ΅ ν¨ν‚· μ „μ†΅ (μ‚¬μ„¤ IP μ‚¬μ©)
2. NAT μ¥λΉ„κ°€ **κ³µμΈ IPλ΅ λ³€κ²½**ν•μ—¬ μΈν„°λ„·μΌλ΅ μ†΅μ‹ 
3. μ‘λ‹µ ν¨ν‚·μ΄ κ³µμΈ IPλ΅ λ„μ°©ν•λ©΄, NAT μ¥λΉ„κ°€ **μ›λ μ‚¬μ„¤ IPλ΅ λ³€ν™ ν›„ μ „λ‹¬**

---

## 3οΈβƒ£ NATμ μΆ…λ¥

| μΆ…λ¥           | μ„¤λ… |
|----------------|------|
| SNAT (Source NAT) | **μ¶λ°μ§€ IPλ¥Ό κ³µμΈ IPλ΅ λ³€κ²½**. μΌλ°μ μΌλ΅ λ‚΄λ¶€ β†’ μ™Έλ¶€ νΈλν”½μ— μ‚¬μ© |
| DNAT (Destination NAT) | **λ©μ μ§€ IPλ¥Ό μ‚¬μ„¤ IPλ΅ λ³€κ²½**. μ£Όλ΅ μ™Έλ¶€ β†’ λ‚΄λ¶€ μ ‘κ·Ό (ν¬νΈν¬μ›λ”©) |
| PAT (Port Address Translation) | μ—¬λ¬ μ‚¬μ„¤ IPκ°€ **ν•λ‚μ κ³µμΈ IP + ν¬νΈλ²νΈ**λ΅ λ³€ν™. λ‹¤μ¤‘ μ ‘μ† κ°€λ¥ |

---

## 4οΈβƒ£ ν¬νΈν¬μ›λ”©μ΄λ€?

> μ™Έλ¶€μ—μ„ λ‚΄λ¶€ λ„¤νΈμ›ν¬μ νΉμ • μ„λ²„λ‚ μ„λΉ„μ¤μ— μ ‘κ·Όν•  μ μλ„λ΅ **ν¬νΈλ¥Ό κΈ°μ¤€μΌλ΅ νΈλν”½ μ „λ‹¬** μ„¤μ •

- **DNATμ ν• ν•νƒ**
- μ™Έλ¶€ μ”μ²­ (κ³µμΈ IP + ν¬νΈ)μ„ β†’ **λ‚΄λ¶€ IP + ν¬νΈλ΅ λ§¤ν•‘**
- μ: `203.0.113.1:8080 β†’ 192.168.0.10:80`

---

## 5οΈβƒ£ NAT vs ν¬νΈν¬μ›λ”©

| ν•­λ©             | NAT                            | ν¬νΈν¬μ›λ”© |
|------------------|--------------------------------|-------------|
| κ°λ…             | IP μ£Όμ† μμ²΄λ¥Ό λ³€ν™             | ν¬νΈ κΈ°μ¤€μΌλ΅ νΈλν”½ μ „λ‹¬ |
| λ°©ν–¥             | λ‚΄λ¶€ β†’ μ™Έλ¶€ μ£Όλ΅ μ‚¬μ©           | μ™Έλ¶€ β†’ λ‚΄λ¶€ μ£Όλ΅ μ‚¬μ© |
| λ³΄μ• ν¨κ³Ό        | μ‚¬μ„¤ IP μ¨κΉ€                   | νΉμ • ν¬νΈλ§ κ°λ°© κ°€λ¥ |
| μ‚¬μ© μ          | μΌλ° μΈν„°λ„· μ ‘μ†               | μ›Ή μ„λ²„, κ²μ„ μ„λ²„ μ΄μ λ“± |

---

## 6οΈβƒ£ μ„¤μ • μμ‹

### λ¦¬λ…μ¤ iptables DNAT (ν¬νΈν¬μ›λ”©)

```
iptables -t nat -A PREROUTING -p tcp --dport 8080 -j DNAT --to-destination 192.168.0.10:80
```

### λΌμ°ν„° ν¬νΈν¬μ›λ”© (κ°λ…λ„)

```
[μ™Έλ¶€ μ”μ²­] β†’ [κ³µμΈ IP:8080] β†’ [λΌμ°ν„°] β†’ [λ‚΄λ¶€ IP:80]
```

---

## π― μ •λ¦¬ μ”μ•½

β” NATλ” **κ³µμΈ IP β†” μ‚¬μ„¤ IP μ£Όμ† λ³€ν™** κΈ°μ   
β” ν¬νΈν¬μ›λ”©μ€ **μ™Έλ¶€ μ”μ²­μ„ λ‚΄λ¶€ IP/ν¬νΈλ΅ μ „λ‹¬**ν•λ” λ°©μ‹  
β” SNATμ€ λ‚΄λ¶€ β†’ μ™Έλ¶€, DNATμ€ μ™Έλ¶€ β†’ λ‚΄λ¶€ νΈλν”½ μ²λ¦¬  
β” ν¬νΈν¬μ›λ”©μ€ μ„λ²„ μ΄μ, μ›κ²© μ ‘μ† λ“±μ— ν™μ©  
β” λ³΄μ•μƒ ν•„μ”ν• ν¬νΈλ§ μ—΄μ–΄μ£Όλ” κ²ƒμ΄ μ¤‘μ”
